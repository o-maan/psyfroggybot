# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é –∏–∑–º–µ–Ω–µ–Ω–∏–π

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:

1. ‚úÖ –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã (–∫–æ–º–º–∏—Ç ac083d2)
2. ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–ø—É—à–µ–Ω—ã –Ω–∞ GitHub
3. ‚è≥ –û—Å—Ç–∞–ª–æ—Å—å –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## üöÄ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–µ–ø–ª–æ—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä:

–ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É –∏ –≤—ã–ø–æ–ª–Ω–∏ —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã:

```bash
# 1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@94.228.118.202

# 2. –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /var/www/psyfroggybot

# 3. –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å GitHub
git pull

# 4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
bun install

# 5. –í–ê–ñ–ù–û: –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
bun run migrate

# 6. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞
pm2 restart psyfroggybot

# 7. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
pm2 logs psyfroggybot --lines 50
```

## üìã –ß—Ç–æ –±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:
- `migrations/20251130000001_add_city_to_users.cjs` - –º–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—è city
- `src/commands/user/me.ts` - –∫–æ–º–∞–Ω–¥–∞ /me
- `src/handlers/callbacks/me.ts` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫ /me
- `src/handlers/messages/me-editing.ts` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ç–µ–∫—Å—Ç–∞ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
- `src/utils/onboarding-final-message.ts` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `src/db.ts` - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ city –≤ getUserByChatId
- `src/commands/user/index.ts` - –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ /me
- `src/handlers/callbacks/index.ts` - –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã callbacks /me
- `src/handlers/messages/text.ts` - –¥–æ–±–∞–≤–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `src/handlers/callbacks/onboarding.ts` - —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –∫–Ω–æ–ø–∫–∏
- `src/handlers/messages/onboarding.ts` - —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏:**
   ```bash
   sqlite3 /var/www/databases/psy_froggy_bot/froggy.db "PRAGMA table_info(users);" | grep city
   ```
   –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏: `13|city|TEXT|0||0`

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–∞–Ω–¥—ã /me:**
   - –û—Ç–ø—Ä–∞–≤—å –±–æ—Ç—É –∫–æ–º–∞–Ω–¥—É `/me`
   - –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å —Ç–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ —Å –∫–Ω–æ–ø–∫–∞–º–∏

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞:**
   - –°–æ–∑–¥–∞–π –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–¥—Ä—É–≥–æ–π Telegram –∞–∫–∫–∞—É–Ω—Ç)
   - –û—Ç–ø—Ä–∞–≤—å `/start`
   - –ü—Ä–æ–π–¥–∏ –≤–µ—Å—å –æ–Ω–±–æ—Ä–¥–∏–Ω–≥
   - –í –∫–æ–Ω—Ü–µ –¥–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —É—á–µ—Ç–æ–º –≤—Ä–µ–º–µ–Ω–∏

## üéØ –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:

### –ö–æ–º–∞–Ω–¥–∞ /me:
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç: –∏–º—è, –ø–æ–ª, —Ç–∞–π–º–∑–æ–Ω—É, –∑–∞–ø—Ä–æ—Å
- –ü–æ–∑–≤–æ–ª—è–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥–æ–µ –ø–æ–ª–µ
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: ‚òëÔ∏è –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π

### –§–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞:

**–ù–æ—á–Ω–æ–µ –≤—Ä–µ–º—è (20:00-9:00):**
```
–í—Å–µ –≥–æ—Ç–æ–≤–æ, —É—Ä–∞ üéâ
–í—Å—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–µ–±–µ –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ –∫–æ–º–∞–Ω–¥–µ /me

–†–∞–¥, —á—Ç–æ —Ç—ã –Ω–∞ —ç—Ç–æ–º –ø—É—Ç–∏ üë£ –Ø –±—É–¥—É —Ä—è–¥–æ–º! ü§ó

–£–∂–µ –ø–æ–∑–¥–Ω–æ, –ø–æ—Ä–∞ –æ—Ç–¥—ã—Ö–∞—Ç—å üåô
–í 9:00 –ø—Ä–∏–¥–µ—Ç –ø–µ—Ä–≤–∞—è —É—Ç—Ä–µ–Ω–Ω—è—è –ª—è–≥—É—Ö–∞ ‚Äì —Ç—ã —Å–º–æ–∂–µ—à—å –ø–∏—Å–∞—Ç—å –º–Ω–µ –≤ —Ç–µ—á–µ–Ω–∏–µ –≤—Å–µ–≥–æ –¥–Ω—è –ø–æ –∂–µ–ª–∞–Ω–∏—é
–û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è —è –ø—Ä–∏—à–ª—é –≤ 20:00, –∏—Ö –Ω–µ –ø—Ä–æ–ø—É—Å–∫–∞–π üìù
–î–æ –∑–∞–≤—Ç—Ä–∞ üê∏
```
*–ë–µ–∑ –∫–Ω–æ–ø–æ–∫*

**–î–Ω–µ–≤–Ω–æ–µ –≤—Ä–µ–º—è (9:00-20:00):**
- –ú–µ–Ω—å—à–µ 1 —á–∞—Å–∞ –¥–æ –≤–µ—á–µ—Ä–∞: —Ç–µ–∫—Å—Ç –±–µ–∑ –∫–Ω–æ–ø–æ–∫
- 1-3 —á–∞—Å–∞ –¥–æ –≤–µ—á–µ—Ä–∞: —Ç–µ–∫—Å—Ç + –∫–Ω–æ–ø–∫–∏ "–•–æ—á—É —Å–µ–π—á–∞–∞–∞–∞–∞—Å üòÅ" –∏ "–ñ–¥–µ–º –≤–µ—á–µ—Ä–∞"
- –ë–æ–ª—å—à–µ 3 —á–∞—Å–æ–≤: —Ç–µ–∫—Å—Ç + –∫–Ω–æ–ø–∫–∏ "–•–æ—á—É —Å–µ–π—á–∞–∞–∞–∞–∞—Å üòÅ" –∏ "–ñ–¥–µ–º –≤–µ—á–µ—Ä–∞"

## üêõ –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫:

1. **–ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏:**
   ```bash
   pm2 logs psyfroggybot --err --lines 100
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–∏–ª–∞—Å—å:**
   ```bash
   cd /var/www/psyfroggybot
   bun run migrate
   ```

3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ –±–æ—Ç–∞:**
   ```bash
   pm2 restart psyfroggybot
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç—É—Å:**
   ```bash
   pm2 status
   ```

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π:

- –î–æ–±–∞–≤–ª–µ–Ω–æ —Ñ–∞–π–ª–æ–≤: 4
- –ò–∑–º–µ–Ω–µ–Ω–æ —Ñ–∞–π–ª–æ–≤: 14
- –í—Å–µ–≥–æ —Å—Ç—Ä–æ–∫: +1039 -114
- –ö–æ–º–º–∏—Ç: ac083d2

üéâ **–í–°–ï –ì–û–¢–û–í–û –ö –ó–ê–ü–£–°–ö–£!**
