# üìã –ü–†–ê–í–ò–õ–ê GENDER-–ê–î–ê–ü–¢–ê–¶–ò–ò (–ü–∞–º—è—Ç–∫–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞)

## üéØ –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ

**–í–°–ï–ì–î–ê –∏—Å–ø–æ–ª—å–∑—É–π `sendToUser()` –≤–º–µ—Å—Ç–æ `bot.telegram.sendMessage()`** –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é!

```typescript
// ‚ùå –ù–ï –î–ï–õ–ê–ô –¢–ê–ö:
await bot.telegram.sendMessage(chatId, '–¢—ã —Å–¥–µ–ª–∞–ª –∑–∞–¥–∞–Ω–∏–µ', options);

// ‚úÖ –î–ï–õ–ê–ô –¢–ê–ö:
await sendToUser(bot, chatId, userId, '–¢—ã —Å–¥–µ–ª–∞–ª${:–∞} –∑–∞–¥–∞–Ω–∏–µ', options);
```

---

## üìù 3 —Å–ø–æ—Å–æ–±–∞ –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–æ–≤

### 1. –®–∞–±–ª–æ–Ω—ã –≤ markdown —Ñ–∞–π–ª–∞—Ö (–ü–†–ò–û–†–ò–¢–ï–¢!)

**–ì–¥–µ:** `assets/*.md`, `assets/prompts/*`

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```markdown
–¢—ã —Å–¥–µ–ª–∞–ª${:–∞} –≤–∞–∂–Ω—ã–π —à–∞–≥
–¢—ã —Å–ø—Ä–∞–≤–∏–ª${—Å—è:–∞—Å—å} —Å –∑–∞–¥–∞–Ω–∏–µ–º
–¢—ã –±—ã–ª${:–∞} –æ—á–µ–Ω—å —Å–º–æ–≥${:–ª–∞} –≤—ã—Ä–∞–∑–∏—Ç—å —ç–º–æ—Ü–∏–∏
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ú: "–¢—ã —Å–¥–µ–ª–∞–ª –≤–∞–∂–Ω—ã–π —à–∞–≥"
- –ñ: "–¢—ã —Å–¥–µ–ª–∞–ª–∞ –≤–∞–∂–Ω—ã–π —à–∞–≥"

### 2. –§—É–Ω–∫—Ü–∏—è `ending()` –≤ –∫–æ–¥–µ

**–ì–¥–µ:** TypeScript —Ñ–∞–π–ª—ã (handlers, commands)

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```typescript
import { ending } from '../utils/adapt-text-for-code';

const text = `–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –Ω–µ –ø–æ–±–æ—è–ª${ending(gender, '–∞—Å—å')}`;
await sendToUser(bot, chatId, userId, text, options);
```

**–í–ê–ñ–ù–û:** `sendToUser()` –ø–æ–ª—É—á–∏—Ç —É–∂–µ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –∏ –ù–ï –ø—Ä–∏–º–µ–Ω–∏—Ç regex!

### 3. –ú–∞—Ä–∫–µ—Ä gender:both (–¥–ª—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤)

**–ì–¥–µ:** –¢–µ–∫—Å—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥—Ö–æ–¥—è—Ç –æ–±–æ–∏–º —Ä–æ–¥–∞–º –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```typescript
const text = '–¢—ã –º–æ–ª–æ–¥–µ—Ü! üåü <!-- gender:both -->';
await sendToUser(bot, chatId, userId, text, options);
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –¢–µ–∫—Å—Ç –ù–ï –º–µ–Ω—è–µ—Ç—Å—è –¥–ª—è –æ–±–æ–∏—Ö –ø–æ–ª–æ–≤ (–º–∞—Ä–∫–µ—Ä —É–¥–∞–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

---

## ‚ö†Ô∏è REGEX FALLBACK - —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤

–ï—Å–ª–∏ —Ç—ã –∑–∞–±—ã–ª –¥–æ–±–∞–≤–∏—Ç—å —à–∞–±–ª–æ–Ω `${:–∞}` –∏–ª–∏ `ending()` - regex –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –ù–û:

1. –í –ª–æ–≥–∞—Ö –ø–æ—è–≤–∏—Ç—Å—è **WARNING**: "‚ö†Ô∏è –¢–µ–∫—Å—Ç –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω —á–µ—Ä–µ–∑ regex fallback!"
2. –¢—ã –î–û–õ–ñ–ï–ù –¥–æ–±–∞–≤–∏—Ç—å —à–∞–±–ª–æ–Ω –≤ –∏—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª
3. Regex –ù–ï –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç 100% –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤

---

## üê∏ –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –õ—è–≥—É—à–∫–∞ –í–°–ï–ì–î–ê –º—É–∂—Å–∫–æ–≥–æ —Ä–æ–¥–∞!

**–ü—Ä–∞–≤–∏–ª–æ:** –†–µ—á—å –æ—Ç –ª–∏—Ü–∞ –ª—è–≥—É—à–∫–∏ (–º–µ—Å—Ç–æ–∏–º–µ–Ω–∏–µ "—è") –ù–ï –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è!

**–ü—Ä–∏–º–µ—Ä—ã:**
```typescript
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:
'–Ø —Ä–∞–¥ —Ç–µ–±—è –≤–∏–¥–µ—Ç—å'       // –ù–ï "—Ä–∞–¥–∞"!
'–Ø —É–≤–µ—Ä–µ–Ω –≤ —Ç–µ–±–µ'        // –ù–ï "—É–≤–µ—Ä–µ–Ω–∞"!
'–Ø –≥–æ—Ç–æ–≤ –ø–æ–º–æ—á—å'         // –ù–ï "–≥–æ—Ç–æ–≤–∞"!
'–Ø –∑–∞—Å–∫—É—á–∞–ª –±–µ–∑ —Ç–µ–±—è'    // –ù–ï "–∑–∞—Å–∫—É—á–∞–ª–∞"!
```

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:** –§—É–Ω–∫—Ü–∏—è `isFrogSpeaking()` –≤ `gender-adapter.ts` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –±–ª–∏–∂–∞–π—à–µ–µ –º–µ—Å—Ç–æ–∏–º–µ–Ω–∏–µ –∫ –≥–ª–∞–≥–æ–ª—É:
- "—è" ‚Üí –ù–ï –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è (–ª—è–≥—É—à–∫–∞)
- "—Ç—ã" ‚Üí –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)

---

## üß™ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤–æ–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –ó–∞–ø—É—Å—Ç–∏ —Ç–µ—Å—Ç—ã:
```bash
bun test-gender-adaptation-full.ts
```

### 2. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ:
- ‚úÖ –í—Å–µ "—è" —Ñ—Ä–∞–∑—ã –æ—Å—Ç–∞–ª–∏—Å—å –º—É–∂—Å–∫–æ–≥–æ —Ä–æ–¥–∞
- ‚úÖ –í—Å–µ "—Ç—ã" —Ñ—Ä–∞–∑—ã –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–ª–∏—Å—å –ø–æ–¥ –∂–µ–Ω—Å–∫–∏–π —Ä–æ–¥
- ‚úÖ –ù–µ—Ç WARNING –ª–æ–≥–æ–≤ –ø—Ä–æ regex fallback

### 3. –°–æ–∑–¥–∞–π —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∂–µ–Ω—Å–∫–∏–º –ø–æ–ª–æ–º –∏ –ø—Ä–æ–π–¥–∏ —Å—Ü–µ–Ω–∞—Ä–∏–∏:
- –í–µ—á–µ—Ä–Ω–∏–π –ø–æ—Å—Ç
- –£—Ç—Ä–µ–Ω–Ω–∏–π –ø–æ—Å—Ç
- Deep work (—Å—Ö–µ–º–∞ ABC)
- JOY –ª–æ–≥–∏–∫–∞
- –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è

---

## üìÇ –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã

- `src/utils/send-to-user.ts` - –≥–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏
- `src/utils/gender-adapter.ts` - regex –ø—Ä–∞–≤–∏–ª–∞ + `isFrogSpeaking()`
- `src/utils/gender-template-parser.ts` - –ø–∞—Ä—Å–µ—Ä —à–∞–±–ª–æ–Ω–æ–≤ `${:–∞}`
- `src/utils/adapt-text-for-code.ts` - —Ñ—É–Ω–∫—Ü–∏—è `ending()` –¥–ª—è TypeScript

---

## ‚ùì –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

### ‚ùå –ó–∞–±—ã–ª –¥–æ–±–∞–≤–∏—Ç—å —à–∞–±–ª–æ–Ω
```typescript
// –ü–õ–û–•–û:
await sendToUser(bot, chatId, userId, '–¢—ã —Å–¥–µ–ª–∞–ª –∑–∞–¥–∞–Ω–∏–µ', options);
// ‚Üí WARNING –≤ –ª–æ–≥–∞—Ö + –∞–≤—Ç–æ–∞–¥–∞–ø—Ç–∞—Ü–∏—è —á–µ—Ä–µ–∑ regex (–Ω–µ –≤—Å–µ–≥–¥–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞)
```

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ:
```typescript
await sendToUser(bot, chatId, userId, '–¢—ã —Å–¥–µ–ª–∞–ª${:–∞} –∑–∞–¥–∞–Ω–∏–µ', options);
```

---

### ‚ùå –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª sendMessage –≤–º–µ—Å—Ç–æ sendToUser
```typescript
// –ü–õ–û–•–û:
await bot.telegram.sendMessage(chatId, text, options);
// ‚Üí –¢–µ–∫—Å—Ç –ù–ï –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è!
```

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ:
```typescript
await sendToUser(bot, chatId, userId, text, options);
```

---

### ‚ùå –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–ª —Ä–µ—á—å –ª—è–≥—É—à–∫–∏
```markdown
// –ü–õ–û–•–û:
–Ø —Ä–∞–¥${:–∞} —Ç–µ–±—è –≤–∏–¥–µ—Ç—å
```

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ:
```markdown
–Ø —Ä–∞–¥ —Ç–µ–±—è –≤–∏–¥–µ—Ç—å <!-- gender:both -->
```

---

## üöÄ –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º

- [ ] –í—Å–µ –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `sendToUser()`
- [ ] –í markdown —Ñ–∞–π–ª–∞—Ö –¥–æ–±–∞–≤–ª–µ–Ω—ã —à–∞–±–ª–æ–Ω—ã `${:–∞}` –¥–ª—è –æ–±—Ä–∞—â–µ–Ω–∏–π –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- [ ] –í TypeScript –∫–æ–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `ending()` –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Ç–µ–∫—Å—Ç–æ–≤
- [ ] –†–µ—á—å –ª—è–≥—É—à–∫–∏ (–æ—Ç "—è") –ù–ï –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è
- [ ] –ó–∞–ø—É—â–µ–Ω—ã —Ç–µ—Å—Ç—ã `bun test-gender-adaptation-full.ts` - –≤—Å–µ –ø—Ä–æ—Ö–æ–¥—è—Ç ‚úÖ
- [ ] –í –ª–æ–≥–∞—Ö –ù–ï–¢ WARNING –ø—Ä–æ regex fallback

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-12-10
