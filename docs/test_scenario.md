# Проверка сценария после деплоя

## Что происходит сейчас:

### 1. Пользователь ответил на первое задание, но бот не ответил
**Текущее состояние в БД:**
- task1_completed = 0 (не выполнено)
- task2_completed = 0
- task3_completed = 0

**После деплоя:**
1. Пользователь пишет любое сообщение в комментариях
2. Вызывается `handleInteractiveUserResponse`
3. Метод находит незавершенный пост через `getUserIncompletePosts`
4. Определяет currentStep = 'waiting_negative' (т.к. task1_completed = 0)
5. Отправляет поддержку + плюшки
6. Обновляет task1_completed = 1 в БД

### 2. Пользователь нажал кнопку "Пропустить"
**Обработчик `skip_neg_`:**
1. Получает channelMessageId из callback_data
2. Загружает пост из БД через `getInteractivePost`
3. Отправляет плюшки
4. Обновляет task1_completed = 1

### 3. Пользователь ответил на плюшки
**Текущее состояние:**
- task1_completed = 1
- task2_completed = 0

**Логика:**
1. `determineCurrentStep` возвращает 'waiting_positive'
2. Отправляется задание 3 с кнопками
3. Обновляется task2_completed = 1

### 4. Пользователь нажал "Сделал"
**Обработчик `pract_done_`:**
1. Отправляет поздравление
2. Ставит трофей на пост
3. Обновляет task3_completed = 1
4. Обновляет trophy_set = 1

## Потенциальные проблемы:

1. **Дублирование ответов** - если пользователь напишет несколько сообщений подряд, бот ответит на каждое
2. **Множественные незавершенные посты** - метод берет только последний, старые будут игнорироваться

## Что нужно протестировать:

1. ✅ Ответ на первое задание после деплоя
2. ✅ Кнопка "Пропустить" работает
3. ✅ Ответ на плюшки
4. ✅ Кнопка "Сделал" ставит трофей
5. ✅ Старые посты (несколько дней назад) - кнопки работают